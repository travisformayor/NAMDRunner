{
  "id": "explicit_solvent_npt_v1",
  "name": "Explicit Solvent NPT",
  "description": "Constant pressure/temperature (NPT) simulation in explicit solvent with PME electrostatics. For equilibration and production runs of solvated systems.",
  "namd_config_template": "#############################################################\n## NAMD CONFIGURATION - EXPLICIT SOLVENT NPT             ##\n#############################################################\n# Generated by NAMDRunner\n# Template: Explicit Solvent NPT v1\n\n#############################################################\n## INPUT FILES                                            ##\n#############################################################\nstructure          {{structure_file}}\ncoordinates        {{coordinates_file}}\n\n#############################################################\n## OUTPUT FILES                                           ##\n#############################################################\noutputName         outputs/{{output_name}}\nbinaryoutput       yes\n\n#############################################################\n## INITIAL CONDITIONS                                      ##\n#############################################################\nset temperature    {{temperature}}\ntemperature        $temperature\nfirsttimestep      0\n\n# Periodic Boundary Conditions (from solvated system)\ncellBasisVector1   {{cell_x}}  0.0      0.0\ncellBasisVector2   0.0         {{cell_y}}  0.0\ncellBasisVector3   0.0         0.0      {{cell_z}}\n\n#############################################################\n## SIMULATION PARAMETERS                                   ##\n#############################################################\n\n# Force Field Parameters\nparaTypeCharmm     on\nparameters         {{parameters_file}}\nparameters         {{parameters_file_2}}\n\n# Non-bonded Force Calculations\nexclude            scaled1-4\n1-4scaling         1.0\nswitching          on\nswitchdist         8\ncutoff             10\npairlistdist       12\n\n# Integrator Parameters\ntimestep           {{timestep}}  ;# fs/step\nrigidBonds         all           ;# needed for 2fs+ steps\nnonbondedFreq      1\nfullElectFrequency 2\nstepspercycle      12\n\n# PME (Particle Mesh Ewald for long-range electrostatics)\nPME                yes\nPMEGridSpacing     {{pme_grid_spacing}}\n\n# Temperature Control (Langevin dynamics)\nlangevin           on\nlangevinDamping    {{langevin_damping}}  ;# damping coefficient (gamma)\nlangevinTemp       $temperature\nlangevinHydrogen   off  ;# don't couple to hydrogens\n\n# Pressure Control (NPT ensemble)\nlangevinPiston        on\nlangevinPistonTarget  {{langevin_piston_target}}  ;# pressure in bar (1.01325 = 1 atm)\nlangevinPistonPeriod  1000.0\nlangevinPistonDecay   500.0\nlangevinPistonTemp    $temperature\n\n# Output Frequencies\nxstFreq            {{xst_freq}}\noutputEnergies     {{output_energies_freq}}\ndcdfreq            {{dcd_freq}}\nrestartfreq        {{restart_freq}}\noutputPressure     {{output_pressure_freq}}\n\n#############################################################\n## EXTRA FORCES (optional ENM restraints)                 ##\n#############################################################\nextraBonds         on\nextraBondsFile     {{extrabonds_file}}\n\n#############################################################\n## EXECUTION                                               ##\n#############################################################\n{{execution_command}}          {{steps}}\n",
  "variables": {
    "structure_file": {
      "key": "structure_file",
      "label": "Structure File (PSF)",
      "var_type": {
        "FileUpload": {
          "extensions": [
            ".psf"
          ]
        }
      },
      "help_text": "NAMD structure file with solvated system topology"
    },
    "coordinates_file": {
      "key": "coordinates_file",
      "label": "Coordinates File (PDB)",
      "var_type": {
        "FileUpload": {
          "extensions": [
            ".pdb"
          ]
        }
      },
      "help_text": "Initial coordinates of solvated system"
    },
    "parameters_file": {
      "key": "parameters_file",
      "label": "Force Field Parameters (PRM)",
      "var_type": {
        "FileUpload": {
          "extensions": [
            ".prm",
            ".par"
          ]
        }
      },
      "help_text": "CHARMM force field parameter file (including water/ions)"
    },
    "extrabonds_file": {
      "key": "extrabonds_file",
      "label": "Extra Bonds File (EXB) - Optional",
      "var_type": {
        "FileUpload": {
          "extensions": [
            ".exb",
            ".extra"
          ]
        }
      },
      "help_text": "Optional: Elastic network model or other restraints"
    },
    "output_name": {
      "key": "output_name",
      "label": "Output File Prefix",
      "var_type": {
        "Text": {
          "default": "npt_equilibration"
        }
      },
      "help_text": "Prefix for output files"
    },
    "temperature": {
      "key": "temperature",
      "label": "Temperature (K)",
      "var_type": {
        "Number": {
          "min": 200.0,
          "max": 400.0,
          "default": 300.0
        }
      },
      "help_text": "Simulation temperature in Kelvin"
    },
    "timestep": {
      "key": "timestep",
      "label": "Timestep (fs)",
      "var_type": {
        "Number": {
          "min": 1.0,
          "max": 4.0,
          "default": 2.0
        }
      },
      "help_text": "Integration timestep in femtoseconds"
    },
    "cell_x": {
      "key": "cell_x",
      "label": "Cell X Dimension (\u00c5)",
      "var_type": {
        "Number": {
          "min": 10.0,
          "max": 500.0,
          "default": 124.0
        }
      },
      "help_text": "Periodic box X dimension from solvated system"
    },
    "cell_y": {
      "key": "cell_y",
      "label": "Cell Y Dimension (\u00c5)",
      "var_type": {
        "Number": {
          "min": 10.0,
          "max": 500.0,
          "default": 114.0
        }
      },
      "help_text": "Periodic box Y dimension from solvated system"
    },
    "cell_z": {
      "key": "cell_z",
      "label": "Cell Z Dimension (\u00c5)",
      "var_type": {
        "Number": {
          "min": 10.0,
          "max": 500.0,
          "default": 323.0
        }
      },
      "help_text": "Periodic box Z dimension from solvated system"
    },
    "pme_grid_spacing": {
      "key": "pme_grid_spacing",
      "label": "PME Grid Spacing (\u00c5)",
      "var_type": {
        "Number": {
          "min": 0.5,
          "max": 3.0,
          "default": 1.5
        }
      },
      "help_text": "PME grid spacing (smaller = more accurate but slower)"
    },
    "langevin_damping": {
      "key": "langevin_damping",
      "label": "Langevin Damping Coefficient",
      "var_type": {
        "Number": {
          "min": 0.1,
          "max": 10.0,
          "default": 5.0
        }
      },
      "help_text": "Damping coefficient (gamma). Typical value: 5 for equilibration"
    },
    "langevin_piston_target": {
      "key": "langevin_piston_target",
      "label": "Target Pressure (bar)",
      "var_type": {
        "Number": {
          "min": 0.5,
          "max": 2.0,
          "default": 1.01325
        }
      },
      "help_text": "Target pressure in bar (1.01325 = 1 atm)"
    },
    "xst_freq": {
      "key": "xst_freq",
      "label": "XST Output Frequency",
      "var_type": {
        "Number": {
          "min": 100.0,
          "max": 100000.0,
          "default": 1200.0
        }
      },
      "help_text": "How often to write extended system trajectory (timesteps)"
    },
    "output_energies_freq": {
      "key": "output_energies_freq",
      "label": "Energy Output Frequency",
      "var_type": {
        "Number": {
          "min": 100.0,
          "max": 100000.0,
          "default": 1200.0
        }
      },
      "help_text": "How often to write energy data (timesteps)"
    },
    "dcd_freq": {
      "key": "dcd_freq",
      "label": "DCD Output Frequency",
      "var_type": {
        "Number": {
          "min": 100.0,
          "max": 100000.0,
          "default": 1200.0
        }
      },
      "help_text": "How often to write trajectory frames (timesteps)"
    },
    "restart_freq": {
      "key": "restart_freq",
      "label": "Restart File Frequency",
      "var_type": {
        "Number": {
          "min": 100.0,
          "max": 1000000.0,
          "default": 1200.0
        }
      },
      "help_text": "How often to write restart files (timesteps)"
    },
    "output_pressure_freq": {
      "key": "output_pressure_freq",
      "label": "Pressure Output Frequency",
      "var_type": {
        "Number": {
          "min": 100.0,
          "max": 100000.0,
          "default": 1200.0
        }
      },
      "help_text": "How often to output pressure data (timesteps)"
    },
    "execution_command": {
      "key": "execution_command",
      "label": "Execution Mode",
      "var_type": {
        "Text": {
          "default": "minimize"
        }
      },
      "help_text": "NAMD execution command: 'minimize' for energy minimization, 'run' for dynamics"
    },
    "steps": {
      "key": "steps",
      "label": "Number of Steps",
      "var_type": {
        "Number": {
          "min": 100.0,
          "max": 100000000.0,
          "default": 4800.0
        }
      },
      "help_text": "Number of minimization/simulation steps"
    },
    "parameters_file_2": {
      "key": "parameters_file_2",
      "label": "Force Field Parameters (Water/Ions)",
      "var_type": {
        "FileUpload": {
          "extensions": [
            ".prm",
            ".par"
          ]
        }
      },
      "help_text": "Water and ion parameter file"
    }
  },
  "created_at": "2025-11-02T00:00:00Z",
  "updated_at": "2025-11-02T00:00:00Z"
}