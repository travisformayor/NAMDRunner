# NAMD Commands Reference

> **ðŸ“š For cluster-specific details**, see [`alpine-cluster-reference.md`](alpine-cluster-reference.md)
> **ðŸ”§ For implementation patterns**, see `python-implementation-reference.md`
> **âš™ï¸ For dynamic configuration**, see Phase 5 Settings Page architecture

This document provides a complete reference of NAMD configuration patterns, command execution, and file management. **Note**: Starting in Phase 5, these patterns will be discoverable and configurable via the Settings page rather than hardcoded.

## Table of Contents
- [Configuration Templates](#configuration-templates)
- [Command Execution](#command-execution)
- [File Organization](#file-organization)
- [Parameter Validation](#parameter-validation)
- [Common Workflows](#common-workflows)
- [Error Handling](#error-handling)
- [Mock Data for Testing](#mock-data-for-testing)

## Configuration Templates

### Basic NAMD Configuration Template
General-purpose template suitable for most molecular dynamics simulations:

```tcl
#############################################################
## JOB DESCRIPTION                                         ##
#############################################################
# {{ job_description }}
# Generated by NAMDRunner on {{ timestamp }}
# Job ID: {{ job_id }}

#############################################################
## ADJUSTABLE PARAMETERS                                   ##
#############################################################

# Input structure and coordinates
structure          {{ psf_file }}
coordinates        {{ pdb_file }}

# Output naming
outputName         {{ output_prefix }}
binaryoutput       yes

# Temperature for this simulation
set temperature    {{ temperature | default(300) }}

{% if restart_from_previous %}
# Restart from previous simulation
set input          {{ previous_stage_prefix }}
bincoordinates     $input.coor
binvelocities      $input.vel
extendedSystem     $input.xsc

# Get first timestep from restart
proc get_first_ts { xscfile } {
  set fd [open $xscfile r]
  gets $fd
  gets $fd
  gets $fd line
  set ts [lindex $line 0]
  close $fd
  return $ts
}
set firsttime [get_first_ts $input.restart.xsc]
firsttimestep $firsttime
{% else %}
# Starting fresh simulation
temperature        $temperature
firsttimestep      0
{% endif %}

# Periodic cell definition
{% if cell_basis_vectors %}
cellBasisVector1   {{ cell_basis_vectors.x }} 0.0 0.0
cellBasisVector2   0.0 {{ cell_basis_vectors.y }} 0.0
cellBasisVector3   0.0 0.0 {{ cell_basis_vectors.z }}
{% endif %}

#############################################################
## SIMULATION PARAMETERS                                   ##
#############################################################

# Force field parameters
paraTypeCharmm     on
{% for param_file in parameter_files %}
parameters         {{ param_file }}
{% endfor %}

# Non-bonded force calculations
exclude            scaled1-4
1-4scaling         1.0
switching          on
switchdist         {{ switch_distance | default(8) }}
cutoff             {{ cutoff_distance | default(10) }}
pairlistdist       {{ pairlist_distance | default(12) }}

# Integration parameters
timestep           {{ timestep | default(2.0) }}  # femtoseconds
rigidBonds         all                            # needed for 2fs steps
nonbondedFreq      1
fullElectFrequency 2
stepspercycle      12

# PME (Particle Mesh Ewald) for electrostatics
PME                yes
PMEGridSpacing     {{ pme_grid_spacing | default(1.5) }}

# Temperature control (Langevin dynamics)
langevin           on
langevinDamping    {{ langevin_damping | default(5) }}
langevinTemp       $temperature
langevinHydrogen   off

# Pressure control (for NPT ensemble)
{% if pressure_control %}
langevinPiston        on
langevinPistonTarget  {{ pressure | default(1.01325) }}  # bar
langevinPistonPeriod  {{ piston_period | default(1000) }}
langevinPistonDecay   {{ piston_decay | default(500) }}
langevinPistonTemp    $temperature
{% endif %}

# Output frequencies (in timesteps)
xstFreq            {{ output_freq | default(9600) }}
outputEnergies     {{ output_freq | default(9600) }}
dcdfreq            {{ output_freq | default(9600) }}
restartfreq        {{ output_freq | default(9600) }}
outputPressure     {{ output_freq | default(9600) }}

# Trajectory wrapping
wrapAll            off
wrapWater          off

#############################################################
## EXTRA PARAMETERS                                        ##
#############################################################

{% if extra_bonds %}
# Harmonic restraints for equilibration
extraBonds on
{% for extra_bond_file in extra_bond_files %}
extraBondsFile {{ extra_bond_file }}
{% endfor %}
{% endif %}

{% if custom_parameters %}
# Custom simulation parameters
{{ custom_parameters }}
{% endif %}

#############################################################
## EXECUTION SCRIPT                                        ##
#############################################################

{% if minimize_steps %}
# Energy minimization
minimize {{ minimize_steps }}
{% endif %}

# Production run
run {{ simulation_steps }}
```

### Multi-Stage DNA Origami Templates

#### Stage 1: Minimization Template
```tcl
# Initial energy minimization for DNA origami
# Removes bad contacts before dynamics

structure          {{ psf_file }}
coordinates        {{ pdb_file }}
outputName         equil_min

# Start from new coordinates
temperature        300

# Only minimization, no dynamics
minimize           4800

# No pressure control during minimization
# No extraBonds yet - let structure relax

# Standard parameters (force field, integration, etc.)
paraTypeCharmm     on
{% for param_file in parameter_files %}
parameters         {{ param_file }}
{% endfor %}

exclude            scaled1-4
1-4scaling         1.0
switching          on
switchdist         8
cutoff             10
pairlistdist       12

timestep           2.0
rigidBonds         all
nonbondedFreq      1
fullElectFrequency 2
stepspercycle      12

PME                yes
PMEGridSpacing     1.5

# Periodic cell
cellBasisVector1   {{ cell_basis_vectors.x }} 0.0 0.0
cellBasisVector2   0.0 {{ cell_basis_vectors.y }} 0.0
cellBasisVector3   0.0 0.0 {{ cell_basis_vectors.z }}
```

#### Stage 2: Strong Restraints (k=0.5)
```tcl
# DNA origami equilibration with strong restraints
# k = 0.5 kcal/mol/Ã…Â²

structure          {{ psf_file }}
coordinates        {{ pdb_file }}
outputName         equil_k0.5

# Restart from minimization
set input          equil_min
bincoordinates     $input.coor
# Note: No velocities from minimization, will be initialized
temperature        300

# Strong elastic network restraints
extraBonds on
extraBondsFile {{ job_name }}_k0.5.enm.extra
{% if mg_hexahydrate %}
extraBondsFile mghh_extrabonds  # MgÂ²âº hexahydrate restraints
{% endif %}

# Run for 4.8 ns (2.4M steps at 2fs)
run 2400000

# Standard parameters
paraTypeCharmm     on
{% for param_file in parameter_files %}
parameters         {{ param_file }}
{% endfor %}

exclude            scaled1-4
1-4scaling         1.0
switching          on
switchdist         8
cutoff             10
pairlistdist       12

timestep           2.0
rigidBonds         all
nonbondedFreq      1
fullElectFrequency 2
stepspercycle      12

PME                yes
PMEGridSpacing     1.5

# Temperature and pressure control
langevin           on
langevinDamping    5
langevinTemp       300
langevinHydrogen   off

langevinPiston     on
langevinPistonTarget 1.01325
langevinPistonPeriod 1000
langevinPistonDecay  500
langevinPistonTemp   300

# Output frequencies
xstFreq            9600
outputEnergies     9600
dcdfreq            9600
restartfreq        9600
outputPressure     9600

# Periodic cell
cellBasisVector1   {{ cell_basis_vectors.x }} 0.0 0.0
cellBasisVector2   0.0 {{ cell_basis_vectors.y }} 0.0
cellBasisVector3   0.0 0.0 {{ cell_basis_vectors.z }}
```

#### Job Restart Template (Phase 6+)
```tcl
# Template for restarting a NAMD job from checkpoint files
# Used when researcher clicks "Restart Job" in NAMDRunner

#############################################################
## JOB RESTART DESCRIPTION                                ##
#############################################################
# Restart of Job ID: {{ parent_job_id }}
# Original job: {{ parent_job_name }}
# Restart reason: {{ restart_reason }}
# Generated by NAMDRunner on {{ timestamp }}

#############################################################
## RESTART CONFIGURATION                                  ##
#############################################################

# Input structure (same as original)
structure          {{ psf_file }}
coordinates        {{ pdb_file }}

# Output naming for restart job
outputName         {{ restart_output_prefix }}
binaryoutput       yes

# Essential restart section - load checkpoint files
set input          {{ checkpoint_file_prefix }}
bincoordinates     $input.restart.coor
binvelocities      $input.restart.vel
extendedSystem     $input.restart.xsc

# Get correct timestep from previous run
proc get_first_ts { xscfile } {
  set fd [open $xscfile r]
  gets $fd
  gets $fd
  gets $fd line
  set ts [lindex $line 0]
  close $fd
  return $ts
}
set firsttime [get_first_ts $input.restart.xsc]
firsttimestep $firsttime

# Do NOT set temperature when restarting!
# Temperature and velocities come from checkpoint files

#############################################################
## RESTART PARAMETERS                                     ##
#############################################################

# Use same simulation parameters as original job
# (Force field, PME, integration settings, etc.)
{{ original_simulation_parameters }}

# Run remaining steps (calculated by NAMDRunner)
# Original total: {{ original_total_steps }}
# Completed: {{ completed_steps }}
# Remaining: {{ remaining_steps }}
run {{ remaining_steps }}
```

#### Restart Template Variables
Essential variables for restart jobs:
- `{{ parent_job_id }}` - ID of the job being restarted
- `{{ parent_job_name }}` - Name of the original job
- `{{ restart_reason }}` - Why restart was needed (timeout, failure, etc.)
- `{{ checkpoint_file_prefix }}` - Path to checkpoint files without extension
- `{{ restart_output_prefix }}` - Output name for restart job
- `{{ completed_steps }}` - Steps already completed in original job
- `{{ remaining_steps }}` - Steps to run in restart
- `{{ original_simulation_parameters }}` - Reuse same force field, PME, etc.

#### Legacy Restart Template (Simple Timeout)
```tcl
# Simplified template for walltime timeout restarts

# Essential restart section
set input          {{ previous_output_name }}
bincoordinates     $input.restart.coor
binvelocities      $input.restart.vel
extendedSystem     $input.restart.xsc

# Must get correct timestep from previous run
proc get_first_ts { xscfile } {
  set fd [open $xscfile r]
  gets $fd
  gets $fd
  gets $fd line
  set ts [lindex $line 0]
  close $fd
  return $ts
}
set firsttime [get_first_ts $input.restart.xsc]
firsttimestep $firsttime

# Continue with same parameters as before
# Do NOT set temperature when restarting!

# Run remaining steps
run {{ remaining_steps }}
```

## Command Execution

### Module Sequence Discovery (Dynamic Configuration)
**Phase 5+**: Module sequences will be discovered automatically via Settings page using:

```bash
# Discover available NAMD versions
module avail namd 2>&1 | grep namd

# Get module dependencies
module spider namd/3.0.1_cpu

# Test module loading sequence
module purge && module load gcc/14.2.0 openmpi/5.0.6 namd/3.0.1_cpu && which namd3
```

**Legacy Reference** (Alpine Cluster):
```bash
# For NAMD 3.0.1 (current version on Alpine)
module purge
module load gcc/14.2.0
module load openmpi/5.0.6
module load namd/3.0.1_cpu
```

### NAMD Execution Command (Discoverable Configuration)
**Phase 5+**: Execution patterns will be detected and configurable via Settings page.

**Discovery Commands**:
```bash
# Detect NAMD version (namd2 vs namd3)
which namd2 && echo "NAMD 2.x detected" || echo "NAMD 2.x not found"
which namd3 && echo "NAMD 3.x detected" || echo "NAMD 3.x not found"

# Test MPI execution patterns
mpirun -np 1 namd3 --version 2>/dev/null && echo "MPI execution works"
```

**Template Examples** (stored as configurable data):
```bash
# NAMD 3.x with MPI + CPU affinity (Alpine pattern)
mpirun -np $SLURM_NTASKS namd3 +setcpuaffinity +pemap 0-$(($SLURM_NTASKS-1)) config.namd > namd_output.log

# NAMD 2.x alternative pattern (other clusters)
mpirun -np $SLURM_NTASKS namd2 config.namd > namd_output.log
```

**Validation Notes**:
- CPU affinity settings (`+setcpuaffinity +pemap`) improve performance but may not be supported on all clusters
- Always redirect output to log file for debugging
- Command patterns will be stored per cluster configuration, not hardcoded

### Complete Job Submission Pattern
```bash
#!/bin/bash
#SBATCH --job-name={{ job_name }}
#SBATCH --output={{ job_name }}_%j.out
#SBATCH --error={{ job_name }}_%j.err
#SBATCH --partition=amilan
#SBATCH --nodes=1
#SBATCH --ntasks={{ num_cores }}
#SBATCH --time={{ walltime }}
#SBATCH --mem={{ memory }}
#SBATCH --qos=normal
#SBATCH --constraint=ib

# Load required modules
module purge
module load gcc/14.2.0
module load openmpi/5.0.6
module load namd/3.0.1_cpu

# Change to working directory
cd {{ working_dir }}

# Execute NAMD with proper configuration
mpirun -np $SLURM_NTASKS namd3 +setcpuaffinity +pemap 0-$(($SLURM_NTASKS-1)) {{ namd_config }} > {{ namd_log }}
```

## File Organization

### Required Input Files from Researcher

#### Structure Files (Required)
- **`.psf` (Protein Structure File)**
  - Contains topology: atoms, bonds, angles, dihedrals
  - Defines molecular system connectivity
  - Created using VMD or similar tools

- **`.pdb` (Protein Data Bank File)**
  - Contains atomic coordinates (x, y, z positions)
  - Initial structure of molecular system
  - Must match PSF topology

#### Parameter Files (Required)
- **`.prm` (CHARMM Parameter Files)**
  - Force field parameters for molecular interactions
  - Common files:
    - `par_all36_na.prm` - Nucleic acid parameters
    - `par_water_ions_cufix.prm` - Water and ion parameters
  - May require multiple files for complex systems

#### Optional Input Files
- **`.str` (Stream Files)** - Additional parameter definitions
- **Previous Simulation Outputs** (for restarts):
  - `.coor` - Binary coordinate file
  - `.vel` - Binary velocity file
  - `.xsc` - Extended system configuration

### Directory Structure Pattern
```
/projects/$USER/namdrunner_jobs/
â””â”€â”€ {job_id}/
    â”œâ”€â”€ job_info.json           # Job metadata
    â”œâ”€â”€ input_files/
    â”‚   â”œâ”€â”€ structure.pdb
    â”‚   â”œâ”€â”€ structure.psf
    â”‚   â”œâ”€â”€ par_all36_na.prm
    â”‚   â””â”€â”€ par_water_ions_cufix.prm
    â”œâ”€â”€ config.namd             # Generated NAMD config
    â”œâ”€â”€ job.sbatch              # Generated SLURM script
    â””â”€â”€ outputs/                # After job completion
        â”œâ”€â”€ {job_name}_{slurm_job_id}.out
        â”œâ”€â”€ {job_name}_{slurm_job_id}.err
        â”œâ”€â”€ namd_output.log
        â”œâ”€â”€ output.dcd           # Trajectory
        â”œâ”€â”€ restart.coor         # Restart files
        â”œâ”€â”€ restart.vel
        â””â”€â”€ restart.xsc

/scratch/alpine/$USER/namdrunner_jobs/
â””â”€â”€ {job_id}/                   # Working directory during execution
    â”œâ”€â”€ [all files copied from projects]
    â”œâ”€â”€ output.dcd              # Trajectory files generated here
    â””â”€â”€ restart.*               # Restart files generated here
```

### File Naming Conventions
- **NAMD config**: `config.namd`
- **SLURM script**: `job.sbatch`
- **NAMD log**: `namd_output.log`
- **SLURM stdout**: `{job_name}_{slurm_job_id}.out`
- **SLURM stderr**: `{job_name}_{slurm_job_id}.err`
- **Trajectory**: `output.dcd`
- **Restart files**: `restart.coor`, `restart.vel`, `restart.xsc`

## Parameter Validation

### NAMD Parameter Ranges
```typescript
interface NAMDValidationRules {
  steps: { min: 1, max: 100000000 };
  temperature: { min: 200, max: 400 };      // Kelvin - biological range
  timestep: { min: 0.1, max: 4.0 };         // femtoseconds
  dcd_freq: { min: 1, max: 100000 };        // output frequency
  restart_freq: { min: 1, max: 1000000 };   // restart frequency
  pme_grid_spacing: { min: 0.8, max: 2.0 }; // PME grid spacing
  switch_distance: { min: 6, max: 12 };     // switching distance
  cutoff_distance: { min: 8, max: 16 };     // cutoff distance
}
```

### Resource Requirements by System Size
| Atom Count | Recommended Cores | Memory | Typical Walltime |
|------------|------------------|---------|------------------|
| < 10,000   | 4-8             | 4-8GB   | 2-4 hours       |
| 10,000-50,000 | 16-32        | 16-32GB | 8-12 hours      |
| 50,000-150,000 | 32-64        | 32-64GB | 12-24 hours     |
| > 150,000  | 64-128          | 64-128GB| 24+ hours       |

### Required Template Variables
Essential variables that must be provided:
- `{{ psf_file }}` - Path to PSF structure file
- `{{ pdb_file }}` - Path to initial PDB coordinates
- `{{ output_prefix }}` - Base name for output files
- `{{ parameter_files }}` - List of CHARMM parameter files
- `{{ simulation_steps }}` - Number of MD steps to run

Optional variables with defaults:
- `{{ temperature }}` - Simulation temperature (default: 300K)
- `{{ timestep }}` - Integration timestep (default: 2.0 fs)
- `{{ output_freq }}` - Output frequency (default: 9600 steps)
- `{{ pressure_control }}` - Enable NPT ensemble (default: true)
- `{{ cell_basis_vectors }}` - Periodic cell dimensions

## Common Workflows

### Standard DNA Origami Equilibration Sequence
```
Stage 1: Minimization
  â†“ (output: equil_min.coor)
Stage 2: Strong restraints (k=0.5)
  â†“ (output: equil_k0.5.coor/vel/xsc)
Stage 3: Medium restraints (k=0.1)
  â†“ (output: equil_k0.1.coor/vel/xsc)
Stage 4: Weak restraints (k=0.01)
  â†“ (output: equil_k0.01.coor/vel/xsc)
Stage 5: Production (k=0, no restraints)
  â†“ (output: production.coor/vel/xsc/dcd)
```

### Resource Allocation Strategy
1. **Test runs**: 4 cores, 4GB, 10 minutes
2. **Small systems**: 24 cores, 16GB, 4 hours
3. **Production runs**: 48 cores, 32GB, 24 hours
4. **Large systems**: 64-128 cores, 64-128GB, extended walltime

## Error Handling

### Common NAMD Errors

#### Simulation Instability
```
Error: Periodic cell has become too small for original patch grid!
```
**Cause**: System collapse or extreme conditions
**Solution**: Reduce timestep, check restraints, verify initial structure

#### Missing Files
```
FATAL ERROR: Unable to read PDB file structure.pdb
```
**Cause**: File path issues or missing input files
**Solution**: Verify file paths, check SFTP uploads, use absolute paths

#### PME Grid Issues
```
Error: PME grid size X is not even
```
**Cause**: Automatic PME grid calculation failed
**Solution**: Manually set PME grid dimensions or adjust spacing

#### Memory Exhaustion
```
FATAL ERROR: Memory allocation failed
```
**Cause**: Insufficient memory allocation
**Solution**: Increase SLURM memory request, reduce system size, or optimize settings

### Runtime Error Detection Patterns
Monitor NAMD log for these critical patterns:
- `FATAL ERROR:` - Immediate failure
- `Warning:` - Potential issues
- `ERROR:` - Critical problems
- Energy spikes > 1000% - System instability
- Temperature spikes > 500K - Simulation problems

### Recovery Strategies
1. **For timeout errors**: Use restart template with remaining steps
2. **For memory errors**: Increase memory allocation, reduce output frequency
3. **For instability**: Reduce timestep, add restraints, check initial structure
4. **For missing files**: Verify SFTP sync, check file paths

## Mock Data for Testing

### Mock Template Variables
```json
{
  "job_description": "Test DNA origami equilibration",
  "timestamp": "2025-01-15T10:30:00Z",
  "job_id": "job_001",
  "psf_file": "../input_files/dna_origami.psf",
  "pdb_file": "../input_files/dna_origami.pdb",
  "output_prefix": "test_output",
  "parameter_files": [
    "../input_files/par_all36_na.prm",
    "../input_files/par_water_ions_cufix.prm"
  ],
  "temperature": 300,
  "simulation_steps": 100000,
  "timestep": 2.0,
  "output_freq": 1000,
  "cell_basis_vectors": {
    "x": 120.0,
    "y": 120.0,
    "z": 180.0
  }
}
```

### Mock NAMD Configuration Output
```tcl
#############################################################
## JOB DESCRIPTION                                         ##
#############################################################
# Test DNA origami equilibration
# Generated by NAMDRunner on 2025-01-15T10:30:00Z
# Job ID: job_001

structure          ../input_files/dna_origami.psf
coordinates        ../input_files/dna_origami.pdb
outputName         test_output
set temperature    300

paraTypeCharmm     on
parameters         ../input_files/par_all36_na.prm
parameters         ../input_files/par_water_ions_cufix.prm

timestep           2.0
run                100000
```

### Mock NAMD Execution Output
```
Charm++> Running on MPI version: 3.1
Info: NAMD 3.0.1 for Linux-x86_64
Info: Built Fri Feb 10 10:30:45 MST 2023 by jim on coral
Info: 1 NAMD binary
Info: Running on 24 processors, 24 nodes, 1 physical nodes.
Info: CPU topology information available.
ETITLE:      TS           BOND          ANGLE          DIHED          IMPRP               ELECT            VDW       BOUNDARY           MISC        KINETIC               TOTAL           TEMP      POTENTIAL         TOTAL3        TEMPAVG            PRESSURE      GPRESSURE         VOLUME       PRESSAVG      GPRESSAVG

ENERGY:       0     123456.7890     789012.3456     345678.9012         12.3456        -9876543.2100    567890.1234         0.0000         0.0000    876543.2100        -8765432.1000        298.15        -9641975.3100    -8765432.1000        298.15          -1234.56        -1234.56    1234567.8900      -1234.56      -1234.56

TIMING: 0  CPU: 0.123456, 0.123456/step  Wall: 0.123456, 0.123456/step, 0.0000123456 hours remaining, 0.000000 MB of memory in use.
```

## Best Practices

### Configuration Generation
1. **Always validate required files exist** before generating config
2. **Use consistent file paths** relative to working directory
3. **Include proper restart logic** for multi-stage workflows
4. **Set appropriate output frequencies** based on system size
5. **Validate parameter ranges** before template rendering

### Performance Optimization
1. **Scale resources with atom count** - use resource allocation table
2. **Optimize PME grid spacing** for system size
3. **Use CPU affinity settings** on Alpine cluster
4. **Balance output frequency** with storage requirements
5. **Monitor memory usage** during long simulations

### File Management
1. **Keep restart files together** (.coor, .vel, .xsc as set)
2. **Use absolute paths** in working directory context
3. **Verify file transfers** between projects and scratch
4. **Clean up large trajectory files** after analysis
5. **Archive completed simulations** with proper metadata

## Implementation Notes for Rust

### Template Engine Integration
- Consider using `tera` crate for Jinja2-like templating
- Implement template validation before rendering
- Support nested template variables and conditionals

### Configuration Validation
```rust
pub struct NAMDConfig {
    pub steps: u32,
    pub temperature: f64,
    pub timestep: f64,
    pub output_freq: Option<u32>,
    // ... other fields
}

impl NAMDConfig {
    pub fn validate(&self) -> Result<(), ValidationError> {
        if self.temperature < 200.0 || self.temperature > 400.0 {
            return Err(ValidationError::InvalidTemperature);
        }
        // ... other validations
        Ok(())
    }
}
```

### Resource Estimation
```rust
pub fn estimate_resources(atom_count: u32, simulation_type: &str) -> ResourceAllocation {
    match (atom_count, simulation_type) {
        (0..=10_000, _) => ResourceAllocation { cores: 8, memory_gb: 8, hours: 4 },
        (10_001..=50_000, _) => ResourceAllocation { cores: 32, memory_gb: 32, hours: 12 },
        (50_001..=150_000, _) => ResourceAllocation { cores: 64, memory_gb: 64, hours: 24 },
        _ => ResourceAllocation { cores: 128, memory_gb: 128, hours: 48 },
    }
}
```

This reference provides the foundation for implementing NAMD configuration generation and job management in the Tauri NAMDRunner application, building on proven patterns from the Python implementation while adapting to Rust and the Alpine cluster environment.